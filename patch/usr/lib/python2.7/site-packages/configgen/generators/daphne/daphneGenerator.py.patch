###
### Adiciona suporte para o sistema Daphne Singe
### Remova este patch quando for atualizar o Batocera.PLUS.
###
--- daphneGenerator.py.original
+++ daphneGenerator.py.modificado
@@ -21,16 +21,19 @@
         romName = os.path.splitext(os.path.basename(rom))[0]
         frameFile = rom + "/" + romName + ".txt"
         commandsFile = rom + "/" + romName + ".commands"
-        
-        if system.config["ratio"] == "16/9":
+        singeFile = rom + "/" + romName + ".singe"
+
+        if os.path.isfile(singeFile):
             commandArray = [batoceraFiles.batoceraBins[system.config['emulator']],
-                            romName, "vldp", "-framefile", frameFile, "-useoverlaysb", "2", "-ignore_aspect_ratio",
-                            "-x", str(gameResolution["width"]), "-y", str(gameResolution["height"]), "-fullscreen",
-                            "-fastboot", "-datadir", batoceraFiles.daphneDatadir, "-homedir", batoceraFiles.daphneHomedir]
+                            "singe", "vldp", "-retropath", "-script", singeFile, "-framefile", frameFile, "-fullscreen",
+                            "-datadir", batoceraFiles.daphneDatadir, "-homedir", batoceraFiles.daphneHomedir]
         else:
             commandArray = [batoceraFiles.batoceraBins[system.config['emulator']],
                             romName, "vldp", "-framefile", frameFile, "-useoverlaysb", "2", "-fullscreen",
                             "-fastboot", "-datadir", batoceraFiles.daphneDatadir, "-homedir", batoceraFiles.daphneHomedir]
+
+        if system.config["ratio"] == "16/9":
+            commandArray.extend(["-ignore_aspect_ratio", "-x", str(gameResolution["width"]), "-y", str(gameResolution["height"])])
 
         # The folder may have a file with the game name and .commands with extra arguments to run the game.
         if os.path.isfile(commandsFile):
