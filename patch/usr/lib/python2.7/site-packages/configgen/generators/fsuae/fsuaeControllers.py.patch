#
# Corrige problemas com controles que tem o nome com caracteres especiais,
# como é o caso do adaptador de controle da sony para ps4.
#
# Com a atualização do python em uma futura atualização do batocera.plus
# este patch pode não ter utilidade.
#
--- fsuaeControllers.py.original
+++ fsuaeControllers.py.modificado
@@ -3,6 +3,7 @@
 
 import batoceraFiles
 import os.path
+import codecs
 
 # Create the controller configuration file
 def generateControllerConfig(system, playersControllers):
@@ -32,7 +33,7 @@
 
     for playercontroller, pad in sorted(playersControllers.items()):
         configFileName = "{}/{}".format(batoceraFiles.fsuaeConfig, "Controllers/" + pad.guid + "_linux.conf")
-        f = open(configFileName, "w")
+        f = codecs.open(configFileName, "w", encoding="utf_8_sig")
 
         # fs-uae-controller
         f.write("[fs-uae-controller]\n")
